<div class="w-full p-4" *transloco="let t;" tabindex="0">
    <div class="flex flex-col md:flex-row w-full justify-between md:items-center mb-6">
        <h1 class="text-2xl md:text-4xl font-bold py-4">
            {{ t('role.title') }}
        </h1>
        
        <button (click)="addItem()" mat-raised-button color="primary"  class="flex items-center gap-2">
            <mat-icon>add</mat-icon>
            {{ t('role.new-role') }}
        </button>
    </div>

    <mat-dialog-content class="overflow-auto">
        <!-- Table -->
        <table [dataSource]="dataSource" class="w-full rounded-md bg-card" mat-table matSort>
        
            <!-- Text Columns -->
            @let columns = tableOptions.columns;
            <ng-container *ngFor="let column of columns; trackBy: trackByProperty">
                <ng-container *ngIf="column.type === 'text'" [matColumnDef]="column.property">
                    <th *matHeaderCellDef class="uppercase" mat-header-cell mat-sort-header>{{ t(column.label) }}</th>
                    <td *matCellDef="let row" [ngClass]="column.cssClasses" mat-cell>
                        {{ tableOptions.renderItem(row, column.property) }}
                    </td>
                </ng-container>
            </ng-container>


            
            <!-- Action Column -->
            <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef mat-sort-header class="uppercase text-center border-l">
                    Actions
                </th>
                <td *matCellDef="let row" mat-cell class="border-l">
                    <div class="flex items-center justify-center gap-4">
                        @let actions = tableOptions.actions;
                        @for (action of actions; track $index) {
                            @let label = t(action.label);
                            <button 
                                mat-button 
                                class="mat-button-large"
                                mat-flat-button
                                [color]="'primary'"
                                (click)="action.action(row)"
                            >
                                {{label}}
                            </button>
                        }
                    </div>
                </td>
            </ng-container>

                    
            <tr *matHeaderRowDef="visibleColumns" mat-header-row></tr>
            <tr *matRowDef="let row; columns: visibleColumns;"
                @fadeInBottom
                class="trans-ease-out cursor-pointer"
                mat-row>
            </tr>

            <!-- No Data Row -->
            <tr *matNoDataRow>
                <td [attr.colspan]="4" class="text-center py-4">
                    {{ t('role.table.no-data') }}
                </td>
            </tr>
        </table>
    </mat-dialog-content>

    @let pageSizeOptions = tableOptions.pageSizeOptions;
    @let pageSize = tableOptions.pageSize;
    <mat-paginator class="rounded-b-md" [pageSizeOptions]="pageSizeOptions" [pageSize]="pageSize"></mat-paginator>
</div>

