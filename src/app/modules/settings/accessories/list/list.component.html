<div class="w-full p-4" *transloco="let t;" tabindex="0">
  <!-- Titre et Description -->
  <div class="flex flex-col mb-6">
    <h1 class="text-2xl md:text-4xl font-bold py-4">
      {{ t('entities.accessory.table.title') }}
    </h1>
    <p class="text-sm md:text-base text-gray-600">
      {{ t('entities.accessory.table.description') }}
    </p>
  </div>

  <!-- Bouton Ajouter aligné à droite -->
  <div class="flex justify-end mb-4">
    <button mat-raised-button color="primary" class="text-white" (click)="openAddDialog()">
      {{ t('form.actions.add') }}
    </button>
  </div>

  <!-- Table -->
  <table [dataSource]="dataSource" class="w-full rounded-md bg-card" mat-table matSort>

    <!-- Image Column -->
    @let imageOptions = tableOptions.imageOptions;
    <ng-container matColumnDef="logo">
      <th *matHeaderCellDef mat-header-cell>
        {{ t(imageOptions?.label || 'Logo') }}
      </th>
      <td *matCellDef="let row" class="pr-0 py-2" mat-cell>
        <img [src]="row[imageOptions?.property || 'defaultProperty']" [ngClass]="imageOptions?.cssClasses">
      </td>
    </ng-container>

    <!-- Text Columns -->
    @let columns = tableOptions.columns;
    <ng-container *ngFor="let column of columns; trackBy: trackByProperty">
      <ng-container *ngIf="column.type === 'text'" [matColumnDef]="column.property">
        <th *matHeaderCellDef class="uppercase" mat-header-cell mat-sort-header>
          {{ t(column.label) }}
        </th>
        <td *matCellDef="let row" [ngClass]="column.cssClasses" mat-cell>
          {{ tableOptions.renderItem(row, column.property) }}
        </td>
      </ng-container>
    </ng-container>

    <!-- Action Column -->
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="uppercase text-center border-l">
        Actions
      </th>
      <td mat-cell *matCellDef="let element" class="border-l">
        <div class="w-full h-full flex items-center justify-around">
          <button mat-icon-button color="primary" (click)="onEdit(element)" matTooltip="{{ t('action_button.edit') }}">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button color="warn" (click)="onDelete(element)" matTooltip="{{ t('action_button.delete') }}">
            <mat-icon>delete</mat-icon>
          </button>
          <button mat-icon-button color="accent" (click)="onView(element)" matTooltip="{{ t('action_button.view') }}">
            <mat-icon>visibility</mat-icon>
          </button>
        </div>
      </td>
    </ng-container>

    <!-- Rows -->
    <tr *matHeaderRowDef="visibleColumns" mat-header-row></tr>
    <tr *matRowDef="let row; columns: visibleColumns;" @fadeInBottom class="trans-ease-out cursor-pointer" mat-row></tr>

    <!-- No Data Row -->
    @let count = visibleColumns.length;
    <tr *matNoDataRow>
      <td [attr.colspan]="count" class="text-center py-4">
        {{ t('entities.accessory.table.empty_state') }}
      </td>
    </tr>
  </table>

  <!-- Paginator -->
  @let pageSizeOptions = tableOptions.pageSizeOptions;
  @let pageSize = tableOptions.pageSize;
  <mat-paginator class="rounded-b-md border-t mt-4" [pageSizeOptions]="pageSizeOptions" [pageSize]="pageSize">
  </mat-paginator>
</div>
