<!-- Sign in form -->
<form
    class="mt-8 space-y-6"
    #form
    [formGroup]="formGroup"
    *transloco="let t">
    
    <div class="flex flex-col gap-6">
        <!-- Name -->
        <mat-form-field class="w-full" appearance="outline">
            <mat-label>{{ t('entities.product.fields.name') }}</mat-label>
            <input matInput formControlName="name" />
            <mat-error *ngIf="formGroup.get('name')?.hasError('required')">
                {{ t('form.errors.required') }}
            </mat-error>
            <mat-error *ngIf="formGroup.get('name')?.hasError('minlength')">
                {{ t('form.errors.minLength') }}
            </mat-error>
        </mat-form-field>

        <!-- Description -->
        <mat-form-field class="w-full" appearance="outline">
            <mat-label>{{ t('entities.product.fields.description') }}</mat-label>
            <input matInput formControlName="description" />
            <mat-error *ngIf="formGroup.get('description')?.hasError('required')">
                {{ t('form.errors.required') }}
            </mat-error>
            <!-- <mat-error *ngIf="formGroup.get('description')?.hasError('minlength')">
                {{ t('form.errors.minLength', {}) }}
            </mat-error> -->
        </mat-form-field>

        <!-- Branch UUID -->
        <mat-form-field class="w-full" appearance="outline">
            <mat-label>{{ t('entities.product.fields.branch') }}</mat-label>
            <mat-select [formControlName]="'branch'">
                <mat-option *ngFor="let branch of branches" [value]="branch.id">
                    {{ t(branch.name) }}
                </mat-option>
            </mat-select>
            <mat-error *ngIf="formGroup.get('branch')?.hasError('required')">
                {{ t('form.errors.required') }}
            </mat-error>
        </mat-form-field>

        <!-- Fleet -->
        <mat-form-field class="w-full" appearance="outline">
            <mat-label>{{ t('entities.product.fields.fleet') }}</mat-label>
            <mat-select formControlName="fleet">
                <mat-option [value]="true">{{ t('form.options.yes') }}</mat-option>
                <mat-option [value]="false">{{ t('form.options.no') }}</mat-option>
            </mat-select>
            <mat-error *ngIf="formGroup.get('fleet')?.hasError('required')">
                {{ t('form.errors.required') }}
            </mat-error>
        </mat-form-field>


        <!-- Min Risk -->
        <mat-form-field class="w-full" appearance="outline" [ngClass]="{ 'hidden': !formGroup.get('fleet')?.value }">
            <mat-label>{{ t('entities.product.fields.minRisk') }}</mat-label>
            <input type="number" matInput formControlName="minRisk" />
            <mat-error *ngIf="formGroup.get('minRisk')?.hasError('min')">
                {{ t('form.errors.min', { value: 1 }) }}
            </mat-error>
            <mat-error *ngIf="formGroup.get('minRisk')?.hasError('required')">
                {{ t('form.errors.required') }}
            </mat-error>
        </mat-form-field>

        <!-- Max Risk -->
        <mat-form-field class="w-full" appearance="outline" [ngClass]="{ 'hidden': !formGroup.get('fleet')?.value }">
            <mat-label>{{ t('entities.product.fields.maxRisk') }}</mat-label>
            <input type="number" matInput formControlName="maxRisk" />
            <mat-error *ngIf="formGroup.get('maxRisk')?.hasError('min')">
                {{ t('form.errors.min', { min: 1 }) }}
            </mat-error>
            <mat-error *ngIf="formGroup.get('maxRisk')?.hasError('required')">
                {{ t('form.errors.required') }}
            </mat-error>
        </mat-form-field>

        <!-- Minimum Guarantee Number -->
        <mat-form-field class="w-full" appearance="outline">
            <mat-label>{{ t('entities.product.fields.minimumGuaranteeNumber') }}</mat-label>
            <input type="number" matInput formControlName="minimumGuaranteeNumber" />
            <mat-error *ngIf="formGroup.get('minimumGuaranteeNumber')?.hasError('min')">
                {{ t('form.errors.min', { min: 1 }) }}
            </mat-error>
            <mat-error *ngIf="formGroup.get('minimumGuaranteeNumber')?.hasError('required')">
                {{ t('form.errors.required') }}
            </mat-error>
        </mat-form-field>
    </div>
    
    <!-- Submit button -->
    <button mat-button matStepperNext
        class="mat-button-large  mt-6"
        mat-flat-button
        [color]="'primary'"
        [disabled]="formGroup.invalid"
        (click)="onNext()"
        >
        {{ t('form.actions.next') }}
    </button>
</form>