<div class="w-full p-4" *transloco="let t;" tabindex="0">
    <div class="flex flex-col mb-6" matDialogTitle>
        <h1 class="text-2xl md:text-4xl font-bold py-4">
            {{ t('entities.company.table.title') }}
        </h1>
        <!-- Description -->
        <p class="text-sm md:text-base text-gray-600">
            {{ t('entities.company.table.description') }}
        </p>
    </div>

    <mat-dialog-content>
        <!-- Table -->
        <table [dataSource]="dataSource" class="w-full rounded-md bg-card" mat-table matSort>

            <!-- Checkbox Column -->
            <ng-container matColumnDef="checkbox">
                <th mat-header-cell *matHeaderCellDef mat-header-cell class="uppercase text-center">
                    <mat-checkbox
                        (change)="masterToggle()"
                        [checked]="selection.hasValue() && isAllSelected()"
                        [indeterminate]="selection.hasValue() && !isAllSelected()"
                    ></mat-checkbox>
                </th>
                <td mat-cell *matCellDef="let row" class="text-center">
                    <mat-checkbox
                        (change)="toggleSelection(row)"
                        [checked]="selection.isSelected(row)"
                        [aria-label]="t('form.fields.checkbox')"
                    ></mat-checkbox>
                </td>
            </ng-container>
        
            <!-- Image Column -->
            @let imageOptions = tableOptions.imageOptions;
            <ng-container matColumnDef="logo">
                <th *matHeaderCellDef mat-header-cell>
                    {{ t(imageOptions?.label || 'Logo') }}
                </th>
                <td *matCellDef="let row" class=" pr-0 py-2" mat-cell>
                    <img [src]="row[imageOptions?.property || 'defaultProperty']" [ngClass]="imageOptions?.cssClasses">
                </td>
            </ng-container>

            <!-- Text Columns -->
            @let columns = tableOptions.columns;
            <ng-container *ngFor="let column of columns; trackBy: trackByProperty">
                <ng-container *ngIf="column.type === 'text'" [matColumnDef]="column.property">
                    <th *matHeaderCellDef class="uppercase" mat-header-cell mat-sort-header>{{ t(column.label) }}</th>
                    <td *matCellDef="let row" [ngClass]="column.cssClasses" mat-cell>
                        {{ tableOptions.renderItem(row, column.property) }}
                    </td>
                </ng-container>
            </ng-container>

            
            <tr *matHeaderRowDef="visibleColumns" mat-header-row></tr>
            <tr *matRowDef="let row; columns: visibleColumns;"
                @fadeInBottom
                class="trans-ease-out cursor-pointer"
                mat-row>
            </tr>

            @let count = visibleColumns.length;
            <!-- No Data Row -->
            <tr *matNoDataRow>
                <td [attr.colspan]="count" class="text-center py-4">
                    {{ t('entities.company.table.empty_state') }}
                </td>
            </tr>
        </table>
    </mat-dialog-content>

    <div matDialogActions class="flex flex-col gap-4">
        @let pageSizeOptions = tableOptions.pageSizeOptions;
        @let pageSize = tableOptions.pageSize;
        <mat-paginator class="rounded-b-md border-t" [pageSizeOptions]="pageSizeOptions" [pageSize]="pageSize"></mat-paginator>

        <div class="flex justify-end gap-4 mt-4">
            <button mat-button mat-dialog-close class="mat-button-large" [color]="'primary'">
                {{ t('action_button.cancel') }}
            </button>
            <button mat-button mat-dialog-close class="mat-button-large" [color]="'primary'" (click)="onShare()">
                {{ t('action_button.share') }}
            </button>
        </div>
    </div>

</div>

