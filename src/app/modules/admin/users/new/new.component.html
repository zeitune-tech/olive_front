<div class="w-full pb-10"  *transloco="let t">

    <div class="flex flex-col mb-10">
        <h1 class="text-2xl md:text-4xl font-bold py-4">
            {{ t('entities.user.form.title') }}
        </h1>
        <!-- Description -->
        <p class="text-sm md:text-base text-gray-600">
            {{ t('entities.user.form.description') }}
        </p>
    </div>


    <mat-vertical-stepper  #stepper class="mt-8 rounded-md" [selectedIndex]="selectedIndex">
        <mat-step [stepControl]="formStepOne">
            <ng-template matStepLabel>
                <!-- Informations personnelles -->
                <div class="flex flex-col items-start">
                    <div class="text-lg font-semibold">
                        {{ t('entities.user.form.step_one_title') }}
                    </div>
                    <div class="text-sm text-gray-500">
                        {{ t('entities.user.form.step_one_description') }}
                    </div>
                </div>
            </ng-template>
            <new-user-step-one (formReady)="onStepOneNext($event)" ></new-user-step-one>
        </mat-step>
        @if (currentIsCompanyEmployee) {
            <mat-step [stepControl]="formStepTwo">
                <ng-template matStepLabel>
                    <div class="flex flex-col items-start">
                        <div class="text-lg font-semibold">
                            {{ t('entities.user.form.step_two_title') }}
                        </div>
                        <div class="text-sm text-gray-500">
                            {{ t('entities.user.form.step_two_description') }}
                        </div>
                    </div>
                </ng-template>
                <new-user-step-two (formReady)="onStepTwoNext($event)" ></new-user-step-two>
            </mat-step>
            @if (newHasPointOfSaleAccessLevel) {
                <mat-step [stepControl]="formStepThree">
                    <ng-template matStepLabel>
                        <div class="flex flex-col items-start">
                            <div class="text-lg font-semibold">
                                {{ t('entities.user.form.step_three_title') }}
                            </div>
                            <div class="text-sm text-gray-500">
                                {{ t('entities.user.form.step_three_description') }}
                            </div>
                        </div>
                    </ng-template>
                    <new-user-step-three (formReady)="onStepThreeNext($event)" ></new-user-step-three>
                </mat-step>
            }
        }
        <mat-step [stepControl]="formStepFour">
            <ng-template matStepLabel>
                <div class="flex flex-col items-start">
                    <div class="text-lg font-semibold">
                        {{ t('entities.user.form.step_four_title') }}
                    </div>
                    <div class="text-sm text-gray-500">
                        {{ t('entities.user.form.step_four_description') }}
                    </div>
                </div>
            </ng-template>
            <new-user-step-four (formReady)="onStepFourNext($event)" ></new-user-step-four>
        </mat-step>
        <mat-step [stepControl]="formStepFive">
            <ng-template matStepLabel>
                <div class="flex flex-col items-start">
                    <div class="text-lg font-semibold">
                        {{ t('entities.user.form.step_five_title') }}
                    </div>
                    <div class="text-sm text-gray-500">
                        {{ t('entities.user.form.step_five_description') }}
                    </div>
                </div>
            </ng-template>
            <div class="flex flex-col gap-4 py-4">
                <div class="text-lg font-semibold">
                    {{t('entities.user.form.step_five_summary')}}
                </div>
                <div class="flex flex-col gap-2">
                    <div class="flex gap-6">
                        <div class="flex flex-col gap-1">
                            <div class="text-sm font-semibold">
                                {{t('entities.user.form.step_five_name')}}
                            </div>
                            <div>{{ data.lastName }}</div>
                        </div>
                        <div class="flex flex-col gap-1">
                            <div class="text-sm font-semibold">
                                {{t('entities.user.form.step_five_firstname')}}
                            </div>
                            <div>{{ data.firstName }}</div>
                        </div>
                    </div>
                    <div class="flex gap-6">
                        <div class="flex flex-col gap-1">
                            <div class="text-sm font-semibold">
                                {{t('entities.user.form.step_five_email')}}
                            </div>
                            <div>{{ data.email }}</div>
                        </div>
                        <div class="flex flex-col gap-1">
                            <div class="text-sm font-semibold">
                                {{t('entities.user.form.step_five_phone')}}
                            </div>
                            <div>{{ data.phone }}</div>
                        </div>
                    </div>
                </div>
                <div class="text-lg font-semibold">
                    {{t('entities.user.form.step_five_profile')}}
                </div>
                <div class="flex flex-col gap-2 w-full">
                    <div class="flex gap-6">
                        <div class="flex flex-col gap-1">
                            <div class="text-sm font-semibold">
                                {{t('entities.user.form.step_five_profile_name')}}
                            </div>
                            <!-- Profiles -->
                            <span *ngFor="let profile of data.profiles" class="text-sm mr-2">
                                {{ profile.name }}
                            </span>
                        </div>
                        <div class="flex flex-col gap-1">
                            <div class="text-sm font-semibold">
                                {{t('entities.user.form.step_five_profile_description')}}
                            </div>
                            <div>{{ data.managementEntityName }}</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="flex justify-end gap-4">
                <button mat-button matStepperPrevious class="mat-button-large mt-6" mat-flat-button [color]="'primary'">
                    {{t('entities.user.form.step_five_previous')}}
                </button>
                <button mat-button class="mat-button-large mt-6" mat-flat-button [color]="'primary'" (click)="save()">
                    {{t('entities.user.form.step_five_confirm')}}
                </button>
            </div>
        </mat-step>
        <!-- -->
    </mat-vertical-stepper>
</div>